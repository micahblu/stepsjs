!function(a){"use strict";function b(a,b){return this.func=a,this.param=b,this}function c(a){if(!a)return!1;for(var b=0,c=a.length;c>b;b++)void 0===Q[a[b]]?Q[a[b]]=[{func:this.func,param:this.param}]:(Q[a[b]]=Q[a[b]].filter(function(a){return a.func.toString()!==this.func.toString()}.bind(this)),Q[a[b]].push({func:this.func,param:this.param}));return this}function d(a,b){return a.call(this,b),this}function e(a,b){if(!Q.hasOwnProperty(a))return!1;for(var c=0,d=Q[a].length;d>c;c++)Q[a][c].param?Q[a][c].func.call({topic:a},b,Q[a][c].param):Q[a][c].func.call({topic:a},b);return!0}function f(b){o(),R=b,O=a(b.container),N=g(b.steps),N=E(N),P=F(b.layoutTemplate,N,"step"),O.html(P),G(),L(),H()}function g(a){for(var b=0,c=a.length;c>b;b++)a[b].id="steps-"+b;return a}function h(a){return a.hasClass("locked")?!0:!1}function i(){return M}function j(a,b){return M.hasOwnProperty(a)?b&&l(M[a])?JSON.parse(M[a]):M[a]:!1}function k(){return M={},!0}function l(a){try{JSON.parse(a)}catch(b){return!1}return!0}function m(a,b){M[a]=b}function n(b){var c=parseInt(b.replace("step-",""))-1,d=a("#panel-"+c);return h(d)?console.log("The panel for step '"+b+"' is locked"):(a(".panel-body").addClass("collapse"),d.find(".panel-body").removeClass("collapse")),this}function o(){Handlebars&&Handlebars.registerHelper("select",function(a){if(a.hash.data&&a.hash.data.match(/\./))for(var b=a.hash.data.split("."),c=window,d=0,e=b.length;e>d;d++){if(!c.hasOwnProperty(b[d])){console.log(c+" does not have: "+b[d]);break}c=c[b[d]]}else{if(!a.hash.data)return void console.log("Error: Select helper needs a data context to be passed as a paramter");c=window[a.hash.data]}var f="<select",g=a.hash.dataLabelField,h=a.hash.dataValueField,i=a.hash.defaultSelection;for(var j in a.hash)a.hash.hasOwnProperty(j)&&"data"!==j&&(f+=" "+j+'="'+a.hash[j]+'"');f+=">",a.hash.placeholder&&(f+='<option value="">'+a.hash.placeholder+"</option>");for(var d=0;d<c.length;d++)f+='<option value="'+c[d][h]+'" '+(i===c[d][h]?'selected="selected"':"")+">"+c[d][g]+"</option>";return f+="</select>",new Handlebars.SafeString(f)})}function p(a){if(t(a)){var b=q(a);return e("onPanelValidated",{values:M,panel:a,step:b}),u(a),!0}return x(a),!1}function q(a){return parseInt(a.attr("id").replace(/[^0-9]/g,""))+1}function r(b,c){var d=parseInt(b.replace("step-","")-1),e="#panel-"+d,f=N[d].template.render(c);a(e).find(".panel-content").html(f)}function s(a,b){return"ALPHA"===a?/^[A-Za-z]+$/.test(b):"ALPHANUMERIC"===a?/^[A-Za-z0-9]$/.test(b):"NUMERIC"===a?/^[0-9]+$/.test(b):(a=new RegExp(a),void a.test(b))}function t(b){if(!b)return!1;var c,d=R.validators||null,e="",f="",g=0,h=0,i="",j=[];return b.find('input[type="text"], input[type="hidden"], input[type="checkbox"], select, textarea').each(function(){if(c=this.getAttribute("data-condition"),c&&a(this).parents(".hide").length<1)if(g++,M[this.name]=this.value,e=this.getAttribute("data-validator"),f=this.getAttribute("data-rule"),e&&f&&console.log('Warning: Both a custom validation method and a data rule where attributed to field: "'+this.name+'", the rule will be used'),f)s(f,this.value)&&(h++,M[this.name]=this.value);else if(e)d[e]?d[e].apply(null,[this])&&(M[this.name]=this.value,h++):console.log('[Stepsjs Alert]: A custom validation validator was defined for "'+this.name+'" but no validator method was declared in the configuration object');else if(i=this.getAttribute("data-expected")){var b=new RegExp(i);b.test(a(this).val().trim())&&(M[this.name]=this.value,h++)}else""!==a(this).val().trim()&&"radio"!==this.type&&(M[this.name]=this.value,h++)}),b.find('input[type="radio"]').each(function(){"required"!==this.getAttribute("data-condition")||j[this.name]||(j[this.name]=!0,g++),"required"===this.getAttribute("data-condition")&&j[this.name]&&this.checked&&(M[this.name]=this.value,h++)}),g===h?(N[b.attr("id").replace(/[^0-9]+/,"")].validates=!0,!0):(N[b.attr("id").replace(/[^0-9]+/,"")].validates=!1,!1)}function u(b){b.find(".next-step").removeAttr("disabled"),b.next().removeClass("locked");for(var c=0,d=N.length;d>c;c++)N[c].validates&&a("#panel-"+(N[c].id+1)).removeClass("locked");e("onPanelUnlocked",{panel:b})}function v(b){a(b).removeClass("locked")}function w(b){a(b).addClass("locked")}function x(a){a.find(".next-step").attr("disabled","disabled"),a.nextAll().addClass("locked")}function y(){S=!1}function z(){S=!0}function A(a){e("onBeforeLoadNext",{panel:a}),S&&(a.find(".panel-body").addClass("collapse"),a.next().find(".panel-body").removeClass("collapse")),e("onAfterLoadNext",{panel:a}),e("onPanelExpanded",{panel:a}),p(a.next())}function B(a){e("onBeforeLoadPrev",{panel:a}),a.find(".panel-body").addClass("collapse"),a.prev().find(".panel-body").removeClass("collapse"),e("onAfterLoadPrev",{panel:a}),e("onPanelExpanded",{panel:a})}function C(a,b){var c=new RegExp(a);return c.test(b)}function D(b,c){var d,e,f;return/#/.test(b)?(d=a(b).html(),e=Handlebars.compile(d),f=new Handlebars.SafeString(e(c))):(e=b.render,f=new Handlebars.SafeString(e(c))),f}function E(a){for(var b=(a.container,0),c=a.length;c>b;b++)a[b].renderedTemplate=D(a[b].template,a[b].context);return a}function F(b,c){for(var d,e,f,g=0,h=c.length;h>g;g++)d=c[g].renderedTemplate,f=a.extend(c[g].context,{id:g,steps:d}),e+=D(b,f);return void 0!==e?e.replace("undefined",""):void 0}function G(){O.find(".panel-body").addClass("collapse"),O.find(".panel-container:first").find(".panel-body").removeClass("collapse"),O.find(".next-step").attr("disabled","disabled"),O.find("#panel-0 .prev-step").hide(),O.find(".panel-container").addClass("locked"),O.find(".panel-container:first-child").removeClass("locked")}function H(){O.find(".panel-container").each(function(){var b=a(this),c="panel-"+(N.length-1);return p(b)&&b.attr("id")!==c?void A(b):!1})}function I(){O.on("keyup change","select, input, textarea",function(b){M[this.name]=this.value;var c=a(b.target).parents(".panel-container");e("onFieldChange",{panel:c,event:b}),p(c)})}function J(){O.on("click",function(b){var c=a(b.target).parents(".panel-container"),d=q(c);e("onClickEvent",{event:b,step:d,panel:c}),C("next-step",b.target.className)&&!b.target.disabled&&d!==R.steps.length?A(c):C("prev-step",b.target.className)&&!b.target.disabled?B(c):(C("panel-heading",b.target.className)||C("panel-title",b.target.className))&&(c.hasClass("locked")||c.find(".panel-body").hasClass("collapse")&&(a(".panel-body").addClass("collapse"),c.find(".panel-body").removeClass("collapse"),e("onPanelExpanded",{panel:c})))})}function K(){O.on("blur change","select, input, textarea",function(){var b=this.getAttribute("data-condition");if(b&&a(this).parents(".hide").length<1){var c=R.validators||null,d=this.getAttribute("data-validator"),e=this.getAttribute("data-rule"),f=!0,g=[];e?s(e,this.value)?f=!0:(f=!1,g.push({rule:"invalid",value:this.value})):d?c[d]?c[d].apply(null,[this])?f=!0:(f=!1,g.push({validator:"invalid",value:this.value})):console.log('[Stepsjs Alert]: A custom validation validator was defined for "'+this.name+'" but no validator method was declared in the configuration object'):""===this.value.trim()&&(f=!1,g.push({empty:"invalid",value:this.value})),f?a(this).parent(".form-group")?(a(this).parent(".form-group").addClass("has-success"),a(this).parent(".form-group").removeClass("has-error")):a(this).removeClass("invalid"):a(this).parent(".form-group")?(a(this).parent(".form-group").addClass("has-error"),a(this).parent(".form-group").removeClass("has-success")):a(this).addClass("invalid")}})}function L(){I(),J(),K()}var M={},N=[],O={},P={},Q={},R={},S=!0;a.steps=function(){return{gotoStep:n,evaluate:p,updateStep:r,getStoredValues:i,getStoredValue:j,storeFieldValue:m,resetStoredValues:k,unlockPanel:v,lockPanel:w,preventNext:y,allowNext:z,bind:b,to:c,then:d}}(),a.fn.steps=function(a){return this.each(function(){a.container=this,f(a)})}}(jQuery);
//# sourceMappingURL=steps.min.map